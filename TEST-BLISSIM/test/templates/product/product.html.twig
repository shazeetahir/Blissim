{% extends 'base.html.twig' %}


{% block body %}
	<style>
		.pd-wrap {
			padding: 40px 0;
			font-family: 'Poppins', sans-serif;
		}
		.heading-section {
			text-align: center;
			margin-bottom: 20px;
		}
		.sub-heading {
			font-family: 'Poppins', sans-serif;
			font-size: 12px;
			display: block;
			font-weight: 600;
			color: #2e9ca1;
			text-transform: uppercase;
			letter-spacing: 2px;
		}
		.heading-section h2 {
			font-size: 32px;
			font-weight: 500;
			padding-top: 10px;
			padding-bottom: 15px;
			font-family: 'Poppins', sans-serif;
		}
		.user-img {
			width: 80px;
			height: 80px;
			border-radius: 50%;
			position: relative;
			min-width: 80px;
			background-size: 100%;
		}
		.carousel-testimonial .item {
			padding: 30px 10px;
		}
		.quote {
			position: absolute;
			top: -23px;
			color: #2e9da1;
			font-size: 27px;
		}
		.name {
			margin-bottom: 0;
			line-height: 14px;
			font-size: 17px;
			font-weight: 500;
		}
		.position {
			color: #adadad;
			font-size: 14px;
		}
		.owl-nav button {
			position: absolute;
			top: 50%;
			transform: translate(0, -50%);
			outline: none;
			height: 25px;
		}
		.owl-nav button svg {
			width: 25px;
			height: 25px;
		}
		.owl-nav button.owl-prev {
			left: 25px;
		}
		.owl-nav button.owl-next {
			right: 25px;
		}
		.owl-nav button span {
			font-size: 45px;
		}
		.product-thumb .item img {
			height: auto;
			{# height: 100px; #}
		}
		.product-name {
			font-size: 22px;
			font-weight: 500;
			line-height: 22px;
			margin-bottom: 4px;
		}
		.product-price-discount {
			font-size: 22px;
			font-weight: 400;
			padding: 10px 0;
			clear: both;
		}
		.product-price-discount span.line-through {
			text-decoration: line-through;
			margin-left: 10px;
			font-size: 14px;
			vertical-align: middle;
			color: #a5a5a5;
		}
		.display-flex {
			display: flex;
		}
		.align-center {
			align-items: center;
		}
		.product-info {
			width: 100%;
		}
		{
			# .reviews-counter {
				font-size: 13px;
			}
			.reviews-counter span {
				vertical-align: -2px;
			} #
		}
		.rate {
			float: left;
			padding: 0 10px 0 0;
		}
		.rate:not(:checked) > input {
			position: absolute;
			top: -9999px;
		}
		.rate:not(:checked) > label {
			float: right;
			width: 15px;
			overflow: hidden;
			white-space: nowrap;
			cursor: pointer;
			font-size: 21px;
			color: #ccc;
			margin-bottom: 0;
			line-height: 21px;
		}
		.rate:not(:checked) > label:before {
			content: '\2605';
		}
		.rate > input:checked ~ label {
			color: #ffc700;
		}
		.rate:not(:checked) > label:hover,
		.rate:not(:checked) > label:hover ~ label {
			color: #deb217;
		}
		.rate > input:checked + label:hover,
		.rate > input:checked + label:hover ~ label,
		.rate > input:checked ~ label:hover,
		.rate > input:checked ~ label:hover ~ label,
		.rate > label:hover ~ input:checked ~ label {
			color: #c59b08;
		}
		.product-dtl p {
			font-size: 14px;
			line-height: 24px;
			color: #7a7a7a;
		}
		.product-dtl .form-control {
			font-size: 15px;
		}
		.product-dtl label {
			line-height: 16px;
			font-size: 15px;
		}
		.form-control:focus {
			outline: none;
			box-shadow: none;
		}
		.product-count {
			margin-top: 15px;
		}
		.product-count .qtyminus,
		.product-count .qtyplus {
			width: 34px;
			height: 34px;
			background: #212529;
			text-align: center;
			font-size: 19px;
			line-height: 36px;
			color: #fff;
			cursor: pointer;
		}
		.product-count .qtyminus {
			border-radius: 3px 0 0 3px;
		}
		.product-count .qtyplus {
			border-radius: 0 3px 3px 0;
		}
		.product-count .qty {
			width: 60px;
			text-align: center;
		}
		.round-black-btn {
			border-radius: 4px;
			background: #212529;
			color: #fff;
			padding: 7px 45px;
			display: inline-block;
			margin-top: 20px;
			border: solid 2px #212529;
			transition: all 0.5s ease-in-out 0s;
		}
		.round-black-btn:hover,
		.round-black-btn:focus {
			background: transparent;
			color: #212529;
			text-decoration: none;
		}

		.product-info-tabs {
			margin-top: 25px;
		}
		.product-info-tabs .nav-tabs {
			border-bottom: 2px solid #d8d8d8;
		}
		.product-info-tabs .nav-tabs .nav-item {
			margin-bottom: 0;
		}
		.product-info-tabs .nav-tabs .nav-link {
			border: none;
			border-bottom: 2px solid transparent;
			color: #323232;
		}
		.product-info-tabs .nav-tabs .nav-item .nav-link:hover {
			border: none;
		}
		.product-info-tabs .nav-tabs .nav-item.show .nav-link,
		.product-info-tabs .nav-tabs .nav-link.active,
		.product-info-tabs .nav-tabs .nav-link.active:hover {
			border: none;
			border-bottom: 2px solid #d8d8d8;
			font-weight: bold;
		}
		.product-info-tabs .tab-content .tab-pane {
			padding: 30px 20px;
			font-size: 15px;
			line-height: 24px;
			color: #7a7a7a;
		}
		.review-form .form-group {
			clear: both;
		}
		.mb-20 {
			margin-bottom: 20px;
		}

		.review-form .rate {
			float: none;
			display: inline-block;
		}
		.review-heading {
			font-size: 24px;
			font-weight: 600;
			line-height: 24px;
			margin-bottom: 6px;
			text-transform: uppercase;
			color: #000;
		}
		.review-form .form-control {
			font-size: 14px;
		}
		.review-form input.form-control {
			height: 40px;
		}
		.review-form textarea.form-control {
			resize: none;
		}
		.review-form .round-black-btn {
			text-transform: uppercase;
			cursor: pointer;
		}


		{# comment styles #}
		.d-flex {
			display: flex!important;
		}

		.comment-img {
			width: 3rem;
			height: 3rem;
		}

		.rounded-circle {
			border-radius: 50%!important;
		}

		.mb-1 {
			margin-bottom: 0.25rem!important;
		}

		.fw-bold {
			font-weight: 500!important;
		}

		.me-1 {
			margin-right: 0.25rem!important;
		}
		.link-dark {
			color: #343a40!important;
		}

		.text-muted {
			--bs-text-opacity: 1;
			color: #adb5bd!important;
		}

		.text-nowrap {
			white-space: nowrap!important;
		}

		.mb-2 {
			margin-bottom: 0.5rem!important;
		}

		.mb-2 {
			margin-bottom: 0.5rem!important;
		}

		.align-items-center {
			align-items: center!important;
		}
		.hstack {
			display: flex;
			flex-direction: row;
			align-items: center;
			align-self: stretch;
		}

		.me-2 {
			margin-right: 0.5rem!important;
		}

		.link-primary {
			color: #4285f4!important;
		}

		a {
			color: var(--bs-link-color);
			text-decoration: none;
		}

		.zmdi {
			display: inline-block;
			font: normal normal normal 14px/1 'Material-Design-Iconic-Font';
			font-size: inherit;
			text-rendering: auto;
			-webkit-font-smoothing: antialiased;
			-moz-osx-font-smoothing: grayscale;
		}

		.me-4 {
			margin-right: 1.5rem!important;
		}

		.link-secondary {
			color: #878787!important;
		}

		.link-secondary {
			color: #878787!important;
		}

		.small, small {
			font-size: .8462em;
		}
		.ms-3 {
		margin-left: 1rem!important;
		}

		.link-danger {
		color: #ea4335!important;
		}
		.small, small {
		font-size: .8462em;
		}

		.fw-bold {
			font-weight: 500!important;
		}

		.align-items-center {
			align-items: center!important;
		}

		.ms-3 {
			margin-left: 1rem!important;
		}

		.flex-grow-1 {
			flex-grow: 1!important;
		}



	</style>


	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	<link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800&display=swap" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">


	{# comments #}
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/StudioKonKon/bootstrap-konkon@1.4.1-beta/dist/css/studio-konkon.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css">


	{% for message in app.flashes('success') %}
		<div class="fadeSlowly container alert alert-success">
			{{ message }}
		</div>
	{% endfor %}

	{# {% for message in app.flashes('danger') %}
			<div class="fadeSlowly container alert alert-danger">
				{{ message }}
			</div>
		{% endfor %} #}

	<div class="pd-wrap">
		<div class="container">
			<div class="heading-section">
				<h2>Product :
					{{product.name}}</h2>
			</div>


			<div class="row">
				<div class="col-md-6">
					<div id="slider" class="owl-carousel product-slider">
						<div class="item">
							<img src="https://lw-cdn.com/images/C86589BF53AD/k_2eda8964dcf78d598dd63b66863f0843;w_1600;h_1600;q_70/plafonnier-svean-a-4-lampes.webp"/>
						</div>
						<div class="item">
							<img src="https://lw-cdn.com/images/649BA8375B47/k_574c733fca7e6fcaae0d28801769b043;w_1600;h_1600;q_70/plafonnier-svean-a-4-lampes.webp"/>
						</div>
						<div class="item">
							<img src="https://lw-cdn.com/images/79633A54D0E4/k_87020600f0cbaebc89328e5fba94b595;w_1600;h_1600;q_70/plafonnier-svean-a-4-lampes.webp"/>
						</div>
						<div class="item">
							<img src="https://lw-cdn.com/images/970F4B8B1866/k_3132467701f3baeaf441de534dd3bba5;w_1600;h_1600;q_70/plafonnier-svean-a-4-lampes.webp"/>
						</div>
						<div class="item">
							<img src="https://lw-cdn.com/images/5D32E22E6EA7/k_704fb8921c0dda10507c1dab20fa7710;w_1600;h_1600;q_70/plafonnier-svean-a-4-lampes.webp"/>
						</div>
						<div class="item">
							<img src="https://lw-cdn.com/images/C57326F93CDC/k_6b981c238e8cad6e30e3da2da248bae2;w_1600;h_1600;q_70/plafonnier-svean-a-4-lampes.webp"/>
						</div>
					</div>
					<div id="thumb" class="owl-carousel product-thumb">
						<div class="item">
							<img src="https://lw-cdn.com/images/C86589BF53AD/k_2eda8964dcf78d598dd63b66863f0843;w_1600;h_1600;q_70/plafonnier-svean-a-4-lampes.webp"/>
						</div>
						<div class="item">
							<img src="https://lw-cdn.com/images/649BA8375B47/k_574c733fca7e6fcaae0d28801769b043;w_1600;h_1600;q_70/plafonnier-svean-a-4-lampes.webp"/>
						</div>
						<div class="item">
							<img src="https://lw-cdn.com/images/79633A54D0E4/k_87020600f0cbaebc89328e5fba94b595;w_1600;h_1600;q_70/plafonnier-svean-a-4-lampes.webp"/>
						</div>
						<div class="item">
							<img src="https://lw-cdn.com/images/970F4B8B1866/k_3132467701f3baeaf441de534dd3bba5;w_1600;h_1600;q_70/plafonnier-svean-a-4-lampes.webp"/>
						</div>
						<div class="item">
							<img src="https://lw-cdn.com/images/5D32E22E6EA7/k_704fb8921c0dda10507c1dab20fa7710;w_1600;h_1600;q_70/plafonnier-svean-a-4-lampes.webp"/>
						</div>
						<div class="item">
							<img src="https://lw-cdn.com/images/C57326F93CDC/k_6b981c238e8cad6e30e3da2da248bae2;w_1600;h_1600;q_70/plafonnier-svean-a-4-lampes.webp"/>
						</div>
					</div>
				</div>


				<div class="col-md-6">
					<div class="product-dtl">
						<div class="product-info">
							<div class="product-name">{{product.name}}</div>
							{# <div class="reviews-counter">
								<div class="rate">
									<input type="radio" id="star5" name="rate" value="5" checked/>
									<label for="star5" title="text">5 stars</label>
									<input type="radio" id="star4" name="rate" value="4" checked/>
									<label for="star4" title="text">4 stars</label>
									<input type="radio" id="star3" name="rate" value="3" checked/>
									<label for="star3" title="text">3 stars</label>
									<input type="radio" id="star2" name="rate" value="2"/>
									<label for="star2" title="text">2 stars</label>
									<input type="radio" id="star1" name="rate" value="1"/>
									<label for="star1" title="text">1 star</label>
								</div>
								<span>3 Reviews</span>
							</div> #}
							<div class="product-price-discount">
								<span>{{product.price}}
									€</span>
								{# <span class="line-through">$29.00</span> #}
							</div>
						</div>
						<p>{{product.description}}</p>
						{# <div class="row">
							<div class="col-md-6">
								<label for="size">Size</label>
								<select id="size" name="size" class="form-control">
									<option>S</option>
									<option>M</option>
									<option>L</option>
									<option>XL</option>
								</select>
							</div>
							<div class="col-md-6">
								<label for="color">Color</label>
								<select id="color" name="color" class="form-control">
									<option>Blue</option>
									<option>Green</option>
									<option>Red</option>
								</select>
							</div>
						</div> #}
						<div class="product-count">
							<label for="size">Quantité</label>
							<form action="#" class="display-flex">
								<div class="qtyminus">-</div>
								<input type="text" name="quantity" value="1" class="qty">
								<div class="qtyplus">+</div>
							</form>
							<a href="#" class="round-black-btn">Ajouter au panier</a>
						</div>
					</div>


					<div class="product-info-tabs">
						<ul class="nav nav-tabs" id="myTab" role="tablist">
							<li class="nav-item">
								<a class="nav-link active" id="description-tab" data-toggle="tab" href="#description" role="tab" aria-controls="description" aria-selected="true">Commentaires</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" id="review-tab" data-toggle="tab" href="#review" role="tab" aria-controls="review" aria-selected="false">Laisser un commentaire</a>
							</li>
						</ul>

						<div class="tab-content" id="myTabContent">

							<div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">

								{# <pre>
									{{ dump(product.comments|length) }}
								</pre> #}

								{% if product.comments|length == 0 %}
									<div class="review-heading">Il n'y a pas des commentaires sur ce produit.</div>
								{% endif %}


							
								{# {% for comment in product.comments|reverse %} #}  
								{# using pagination #}

								{% for comment in pagination %}
									<div class="d-flex comment">
										<img class="rounded-circle comment-img" src="https://via.placeholder.com/128/fe669e/ffcbde.png?text={{ comment.user.name |slice(0, 2)}}">
										<div class="flex-grow-1 ms-3">
											<div class="mb-1">
												<a href="#" class="fw-bold link-dark me-1">{{ comment.user.name }}</a>
												<span class="text-muted text-nowrap">{{ comment.date|date('d-m-Y')}}</span>
											</div>
											<div class="mb-2">{{ comment.review }}</div>
											<div class="hstack align-items-center mb-2">
												<a class="link-primary me-2" href="#">
													<i class="zmdi zmdi-thumb-up"></i>
												</a>
												<span class="me-3 small"></span>
												<a class="link-secondary me-4" href="#">
													<i class="zmdi zmdi-thumb-down"></i>
												</a>
												{# <a class="link-secondary small" href="#">REPLY</a> #}

												
												{% if (comment.user == app.user) %}
													<a class="link-danger small ms-3" href="{{path('deleteProductReview',{'comment': comment.id})}}">DELETE</a>
												{% endif %}
												
											</div>
											{# <a class="fw-bold d-flex align-items-center" href="#">
												<i class="zmdi zmdi-chevron-down fs-4 me-3"></i>
												<span>Hide Replies</span>
											</a> #}
										</div>
									</div>
								{% endfor %}
								{{knp_pagination_render(pagination)}}

							</div>


							<div class="tab-pane fade" id="review" role="tabpanel" aria-labelledby="review-tab">

								{% if app.user %}
									<div class="review-heading">Commentaires</div>
									{# <p class="mb-20">There are no reviews yet.</p> #}
									<form
										class="review-form" action="{{path('addProductReview',{'product': product.id})}}" method="POST">
										{# <div class="form-group">
											<label>Your rating</label>
											<div class="reviews-counter">
												<div class="rate">
													<input type="radio" id="star5" name="rate" value="5"/>
													<label for="star5" title="text">5 stars</label>
													<input type="radio" id="star4" name="rate" value="4"/>
													<label for="star4" title="text">4 stars</label>
													<input type="radio" id="star3" name="rate" value="3"/>
													<label for="star3" title="text">3 stars</label>
													<input type="radio" id="star2" name="rate" value="2"/>
													<label for="star2" title="text">2 stars</label>
													<input type="radio" id="star1" name="rate" value="1"/>
													<label for="star1" title="text">1 star</label>
												</div>
											</div>
										</div> #}
										<div class="form-group">
											<label>Votre message</label>
											<textarea class="form-control" name="review" rows="5" required minlength="5"></textarea>
										</div>
										{# <div class="row">
											<div class="col-md-6">
												<div class="form-group">
													<input type="text" name="" class="form-control" placeholder="Name*">
												</div>
											</div>
											<div class="col-md-6">
												<div class="form-group">
													<input type="text" name="" class="form-control" placeholder="Email Id*">
												</div>
											</div>
										</div> #}
										<button class="round-black-btn">Soumettre</button>
									</form>
								{% else %}
									<div class="review-heading">Connectez vous pour laisser un commentaire</div>
									<a type="button" class="round-black-btn" href="{{ path('app_login')}}">Connexion</a>
								{% endif %}

							</div>
						</div>
					</div>


				</div>


			</div>


		</div>
	</div>


	<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="	sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>


	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

	<script>
		$(document).ready(function () {
var slider = $("#slider");
var thumb = $("#thumb");
var slidesPerPage = 4; // globaly define number of elements per page
var syncedSecondary = true;
slider.owlCarousel({
items: 1,
slideSpeed: 2000,
nav: false,
autoplay: false,
dots: false,
loop: true,
responsiveRefreshRate: 200
}).on('changed.owl.carousel', syncPosition);
thumb.on('initialized.owl.carousel', function () {
thumb.find(".owl-item").eq(0).addClass("current");
}).owlCarousel({
items: slidesPerPage,
dots: false,
nav: true,
item: 4,
smartSpeed: 200,
slideSpeed: 500,
slideBy: slidesPerPage,
navText: [
'<svg width="18px" height="18px" viewBox="0 0 11 20"><path style="fill:none;stroke-width: 1px;stroke: #000;" d="M9.554,1.001l-8.607,8.607l8.607,8.606"/></svg>', '<svg width="25px" height="25px" viewBox="0 0 11 20" version="1.1"><path style="fill:none;stroke-width: 1px;stroke: #000;" d="M1.054,18.214l8.606,-8.606l-8.606,-8.607"/></svg>'
],
responsiveRefreshRate: 100
}).on('changed.owl.carousel', syncPosition2);
function syncPosition(el) {
var count = el.item.count - 1;
var current = Math.round(el.item.index -(el.item.count / 2) - .5);
if (current < 0) {
current = count;
}
if (current > count) {
current = 0;
}
thumb.find(".owl-item").removeClass("current").eq(current).addClass("current");
var onscreen = thumb.find('.owl-item.active').length - 1;
var start = thumb.find('.owl-item.active').first().index();
var end = thumb.find('.owl-item.active').last().index();
if (current > end) {
thumb.data('owl.carousel').to(current, 100, true);
}
if (current < start) {
thumb.data('owl.carousel').to(current - onscreen, 100, true);
}
}
function syncPosition2(el) {
if (syncedSecondary) {
var number = el.item.index;
slider.data('owl.carousel').to(number, 100, true);
}
}
thumb.on("click", ".owl-item", function (e) {
e.preventDefault();
var number = $(this).index();
slider.data('owl.carousel').to(number, 300, true);
});


$(".qtyminus").on("click", function () {
var now = $(".qty").val();
if ($.isNumeric(now)) {
if (parseInt(now) - 1 > 0) {
now--;
}
$(".qty").val(now);
}
})
$(".qtyplus").on("click", function () {
var now = $(".qty").val();
if ($.isNumeric(now)) {
$(".qty").val(parseInt(now) + 1);
}
});
});
	</script>
{% endblock %}
